= Flask RestFul =

1. 提供parser功能，自动format输入form数据
{{{
post_parser.add_argument(
’user_priority’, dest=’user_priority’,
type=int, location=’form’,
default=1, choices=range(5), help=’The user\’s priority’,
)

add_argument() lets you specify alternate locations to pull the values from.
flask.Request can be used. For example:
# Look only in the POST body
# parser.add_argument(’name’, type=int, location=’form’) # Look only in the
querystring
parser.add_argument(’PageSize’, type=int, location=’args’) # From the request
headers
parser.add_argument(’User-Agent’, type=str, location=’headers’) # From http
cookies
parser.add_argument(’session_id’, type=str, location=’cookies’) # From file
uploads
Any variable on the
￼￼￼￼parser.add_argument(’picture’, type=werkzeug.datastructures.FileStorage,
location=’files’)

}}}

2. 可以format输出数据
{{{
    user_fields = {
        ’id’: fields.Integer,
        ’username’: fields.String,
        ’email’: fields.String,
        ’user_priority’: fields.Integer,
        ’custom_greeting’: fields.FormattedString(’Hey there
                {username}!’),
        ’date_created’: fields.DateTime,
        ’date_updated’: fields.DateTime,
        'url' : fields.Url('Resource'),
        ’links’: fields.Nested({
                ’friends’:
                fields.Url(’/Users/{id}/Friends’,
                    absolute=True),
                ’posts’:
                fields.Url(’Users/{id}/Posts’,
                    absolute=True),
                }),
    }
   
    @marshal_with(...fiels)
    def get(self):
        print 'fdsafafds' 
    
}}}

3. Make response
{{{
app = Flask(__name__)
api = restful.Api(app)
@api.representation(’application/json’) 
def json(data, code, headers=None):
    resp = make_response(json.dumps(data), code) resp.headers.extend(headers or {})
    return resp
}}}

    
